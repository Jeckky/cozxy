/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 * By Taninut.Bm
 * Create 6/02/2017
 */


var $baseUrl = window.location.protocol + "//" + window.location.host; if (window.location.host == 'localhost'){$baseUrl = window.location.protocol + "//" + window.location.host + '/cozxy/backend/web/'; } else if (window.location.host == '192.168.100.8' || window.location.host == '192.168.100.20'){var str = window.location.pathname; var res = str.split("/"); $baseUrl = window.location.protocol + "//" + window.location.host + '/' + res[1] + '/backend/web/'; } else{$baseUrl = window.location.protocol + "//" + window.location.host + '/'; }function pingHardware(ip, tagId, url){$.ajax({type:'POST', dataType:'JSON', url:url, async:true, data:{ip:ip}, success:function(data){if (data.status){$('.' + tagId).addClass('label-success'); if (typeof (data.led) != "undefined"){var i = 1
        for (var item in data.led){if (data.led[item]){$('.' + tagId + "-" + i).removeClass('fa fa-circle-o'); $('.' + tagId + "-" + i).addClass('fa fa-circle'); }i = i + 1; }}} else
{}}}); }function showLedList(slotCode, url){$.ajax({type:'POST', url:url, data:{slotCode:slotCode}, success:function(data){if (data){$('.divModal').html(data); $('.slotCode').val(slotCode); $('.ledList').modal('show'); }}}); }function saveModal(url){var slotCode = $('.slotCode').val(); var id = $('.led').val(); $.ajax({type:'POST', url:url, data:{slotCode:slotCode, id:id}, success:function(data){if (data){$('.ledList').modal('hide'); location.reload(); }}}); }function show(id){$('#all' + id).show(); $('#notAll' + id).show(); }function hide(id){$('#all' + id).hide(); $('#notAll' + id).hide(); }$('.remark-chanels').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var pickingItemsId = resDataBind[0]; var pickingId = resDataBind[1]; $(".remark-chanels-form-" + pickingItemsId).addClass("show"); }); $('.remark-chanels-ok').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var pickingItemsId = resDataBind[0]; var pickingId = resDataBind[1]; var orderItemPackingId = resDataBind[2]; if (pickingItemsId != ''){$.ajax({url:'remark-channels', data:{"pickingItemsId":pickingItemsId, "status":'ok', "pickingId":pickingId, 'orderItemPackingId':orderItemPackingId}, type:'post', success:function(result){alert('ตรวจเช็คช่องแล้ว'); var JSONObject2 = JSON.parse(result); $(".search-content-new-" + JSONObject2.pickingItemsId).html('<h4>ตรวจสอบแล้วเรียบร้อย</h4>'); if (JSONObject2.CountChannelsInspector == 1){window.location = $baseUrl + 'lockers/lockers/lockers?boxcode=' + JSONObject2.pickingId; } else if (JSONObject2.CountChannelsInspector == 0){window.location = $baseUrl + 'lockers/lockers/lockers?boxcode=' + JSONObject2.pickingId; }}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); } else{alert('ระบุปัญหาที่เจอทุกครั้ง ก่อน Submit')}}); $('.remark-cancel').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var pickingItemsId = resDataBind[0]; var pickingId = resDataBind[1]; $(".remark-chanels-form-" + pickingItemsId).removeClass("show"); }); $('.remark-submit').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var pickingItemsId = resDataBind[0]; var pickingId = resDataBind[1]; var orderItemPackingId = resDataBind[2]; var desc = document.getElementById("remarkDesc-" + pickingItemsId).value; var type = $('input:radio[name=type-' + pickingItemsId + ']:checked').val(); if (!type){alert("Please select your type."); return false; }if (desc != '' && pickingItemsId != ''){$.ajax({url:'remark-channels', data:{"pickingItemsId":pickingItemsId, "remarkDesc":desc, 'status':'no', "pickingId":pickingId, 'type':type, 'orderItemPackingId':orderItemPackingId}, type:'post', success:function(result){alert('ตรวจเช็คช่องแล้ว'); var JSONObject2 = JSON.parse(result); $(".search-content-new-" + JSONObject2.pickingItemsId).html('<h4><code>' + JSONObject2.remark + '<code></h4>'); if (JSONObject2.CountChannelsInspector == 1){window.location = $baseUrl + 'lockers/lockers/lockers?boxcode=' + JSONObject2.pickingId; } else if (JSONObject2.CountChannelsInspector == 0){window.location = $baseUrl + 'lockers/lockers/lockers?boxcode=' + JSONObject2.pickingId; }}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); } else{alert('ระบุปัญหาที่เจอทุกครั้ง ก่อน Submit')}}); $('.test-test').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var pickingItemsId = resDataBind[0]; var pickingId = resDataBind[1]; var orderItemPackingId = resDataBind[2]; $.ajax({url:'channels-packing-items', data:{"pickingItemsId":pickingItemsId, "pickingId":pickingId, 'orderItemPackingId':orderItemPackingId}, type:'post', success:function(result){var JSONObject2 = JSON.parse(result); $(".tes-test").html('' + JSONObject2 + ''); }, error:function(XMLHttpRequest, textStatus, errorThrown){}}); $('#uidemo-modals-alerts-info').modal('show'); }); function suppliers(productId){$.ajax({url:'products-system', data:{"productId":productId}, type:'post', success:function(result){var JSONObject2 = JSON.parse(result); var getApprove = JSONObject2.approve; var GetproductSuppId = JSONObject2.productSuppId; if (getApprove != 'new' && getApprove != 'old'){$('#categoryId').val(JSONObject2.categoryId).trigger('change'); $('#brandId').val(JSONObject2.brandId).trigger('change'); $('#unitId').val(JSONObject2.unit).trigger('change'); $('#smallUnit').val(JSONObject2.smallUnit).trigger('change'); $('#productsuppliers-isbn').val(JSONObject2.isbn); $('#productsuppliers-code').val(JSONObject2.code); $('#productsuppliers-isbn').prop('readonly', true); $('#productsuppliers-code').prop('readonly', true); $('#productsuppliers-title').val(JSONObject2.title); $('#productsuppliers-optionname').val(JSONObject2.optionName); $('#productsuppliers-shortdescription').summernote($("#productsuppliers-shortdescription").code(JSONObject2.shortdescription)); $('#productsuppliers-description').summernote($("#productsuppliers-description").code(JSONObject2.description)); $('#productsuppliers-specification').summernote($("#productsuppliers-specification").code(JSONObject2.specification)); $('#productsuppliers-width').val(JSONObject2.width); $('#productsuppliers-height').val(JSONObject2.height); $('#productsuppliers-depth').val(JSONObject2.depth); $('#productsuppliers-weight').val(JSONObject2.weight); $('#productsuppliers-price').val(JSONObject2.price); $('#productsuppliers-tags').val(JSONObject2.tags); $('.form-group').find('.product-system-hidden').html('<input type="hidden" name="productIds" id="productIds" value="' + JSONObject2.productId + '"><input type="hidden" name="approve" id="approve" value="old">'); $('.form-group').find('.status-system-hidden').html('<h3><code>สถานะ :</code> ค้นหาจาก Product System <code>หรือ</code> <span class="suppliers-clear-data btn btn-primary" onclick="suppliersClearData()">กดปุ่ม "เคลียร์" ต้องการเพิ่มข้อมูลใหม่</span></h3>'); } else{alert('Product ' + JSONObject2.title + ' นี้ยังไม่ได้อนุมัติ '); }}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); }function suppliersClearData(){$('#categoryId').empty(); $('#brandId').empty(); $('#productsuppliers-isbn').val(''); $('#productsuppliers-code').val(''); $('#productsuppliers-title').val(''); $('#productsuppliers-isbn').prop('readonly', false); $('#productsuppliers-code').prop('readonly', false); $('#productsuppliers-optionname').val(''); $('#productsuppliers-shortdescription').summernote($("#productsuppliers-shortdescription").code('')); $('#productsuppliers-description').summernote($("#productsuppliers-description").code('')); $('#productsuppliers-specification').summernote($("#productsuppliers-specification").code('')); $('#productsuppliers-width').val(''); $('#productsuppliers-height').val(''); $('#productsuppliers-depth').val(''); $('#productsuppliers-weight').val(''); $('#productsuppliers-price').val(''); $('#unitId').empty(); $('#smallUnit').empty(); $('#productsuppliers-tags').val(''); $('.form-group').find('.product-system-hidden').html('<input type="hidden" name="productIds" id="productIds" value=""><input type="hidden" name="approve" id="approve" value="new">'); $('.form-group').find('.status-system-hidden').html('<h3><span class="text-success">สถานะ : เคลียร์ข้อมูลสำเร็จ</span></h3>'); }function suppliersCreate(){var productIds = $('#productIds').val(); var approve = $('#approve').val(); var categoryId = $('#categoryId').val(); var brandId = $('#brandId').val(); var isbn = $('#productsuppliers-isbn').val(); var code = $('#productsuppliers-code').val(); var title = $('#productsuppliers-title').val(); var optionname = $('#productsuppliers-optionname').val(); var shortdescription = $('#productsuppliers-shortdescription').code(); var description = $('#productsuppliers-description').code(); var specification = $('#productsuppliers-specification').code(); var width = $('#productsuppliers-width').val(); var height = $('#productsuppliers-height').val(); var depth = $('#productsuppliers-depth').val(); var weight = $('#productsuppliers-weight').val(); var price = $('#productsuppliers-price').val(); var unit = $('#unitId').val(); var smallUnit = $('#smallUnit').val(); var tags = $('#productsuppliers-tags').val(); $.ajax({url:'create', data:{"productIds":productIds, 'approve':approve, 'categoryId':categoryId, 'brandId':brandId, 'isbn':isbn, 'code':code, 'title':title, 'optionname':optionname, 'shortdescription':shortdescription, 'description':description, 'specification':specification, 'width':width, 'height':height, 'depth':depth, 'weight':weight, 'price':price, 'unit':unit, 'smallUnit':smallUnit, 'tags':tags, 'ProductSuppliers':'ProductSuppliers'}, type:'post', success:function(result){}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); }$('.switch').on('switch-change', function(){console.log("inside switchchange"); toggleWeather(); }); function switchers(id, type, status){$.ajax({url:'approve/approve-items', data:{"productSuppId":id, "type":type, 'status':status}, type:'post', success:function(result){if (result == 1){$(".suppliers tbody #productSuppId-" + id).remove(); } else if (result == 2){$(".system tbody #productId-" + id).remove(); }}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); init.push(function(){$('#switchers-colors-square .switcher > input').on('change.switcher', function(on, off, toggle){}); }); }$('.investigate-approve').on('click', function(){var dataBind = this.getAttribute('data-bind'); var resDataBind = dataBind.split(","); var productId = resDataBind[0]; var type = resDataBind[1]; $.ajax({url:'approve/investigate-approve-items', data:{"productId":productId, "type":type}, type:'post', success:function(result){var JSONObject2 = JSON.parse(result); if (type == 1){$('.view-product-id').html(JSONObject2.productSuppId); } else if (type == 2){$('.view-product-id').html(JSONObject2.productId); }$('.view-user-id').html(JSONObject2.firstname + ' ' + JSONObject2.astname); $('.view-product-group-id').html(JSONObject2.productGroupId); $('.view-category-id').html(JSONObject2.cTitle); $('.view-brand-id').html(JSONObject2.bTitle); $('.view-isbn').html(JSONObject2.isbn); $('.view-code').html(JSONObject2.code); $('.view-title').html(JSONObject2.title); $('.view-option-name').html(JSONObject2.optionName); $('.view-shortdescription').html(JSONObject2.shortdescription); $('.view-description').html(JSONObject2.description); $('.view-specification').html(JSONObject2.specification); $('.view-width').html(JSONObject2.width); $('.view-height').html(JSONObject2.height); $('.view-depth').html(JSONObject2.depth); $('.view-weight').html(JSONObject2.weight); $('.view-price').html(JSONObject2.price); $('.view-unit').html(JSONObject2.uTitle); $('.view-small-unit').html(JSONObject2.smuTitle); $('.view-tags').html(JSONObject2.tags); $('.view-create-date-time').html(JSONObject2.createDateTime); $('.view-update-date-time').html(JSONObject2.updateDateTime); if (typeof (JSONObject2.simage) != 'object'){console.log(JSONObject2.simage); if (JSONObject2.simage != 'undefined'){var simage = JSONObject2.simage.split(','); for (var x in simage){$('.view-image-s1').append('<div class="col-sm-3" style="padding: 5px;">\n\
                        <img class="img-responsive" src="' + $baseUrl + simage[x] + '" alt="" style="width:100px;height:100px;">\n\
                    </div>'); }}}if (typeof (JSONObject2.simageThumbnail1) != 'object'){if (JSONObject2.simageThumbnail1 != 'undefined'){var simageThumbnail1 = JSONObject2.simageThumbnail1.split(','); for (var y in simageThumbnail1){$('.view-thumbnail1-s1').append('<div class="col-sm-3" style="padding: 5px;">\n\
                            <img class="img-responsive" src="' + $baseUrl + simageThumbnail1[y] + '" alt="" style="width:100px;height:100px;">\n\
                        </div>'); }}}if (typeof (JSONObject2.simageThumbnail2) != 'object'){if (JSONObject2.simageThumbnail2 != 'undefined'){var simageThumbnail2 = JSONObject2.simageThumbnail2.split(','); for (var z in simageThumbnail2){$('.view-thumbnail2-s1').append('<div class="col-sm-3" style="padding: 5px;">\n\
                        <img class="img-responsive" src="' + $baseUrl + simageThumbnail2[z] + '" alt="" style="width:100px;height:100px;">\n\
                </div>'); }}}}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); $('#myModal-investigate-approve').modal('show'); $('.view-image-s1').html(''); $('.view-thumbnail1-s1').html(''); $('.view-thumbnail2-s1').html(''); $('.view-user-id').html(''); $('.view-product-group-id').html(''); $('.view-category-id').html(''); $('.view-brand-id').html(''); }); function search(userId){$.ajax({url:'approve', data:{"userId":userId}, type:'post', success:function(result){}, error:function(XMLHttpRequest, textStatus, errorThrown){}}); }function suppliersCreatePrice(price, productSuppId){if (price == ''){$(".suppliersCreatePrice").addClass("hidden"); } else{$.ajax({url:'suppliers-create-price', data:{"price":price, 'productSuppId':productSuppId}, type:'post', success:function(result){$(".suppliersCreatePrice").removeClass("hidden"); $(".suppliersCreatePrice").html('<code>ลำดับราคาที่  :' + result + '</code>'); }, error:function(XMLHttpRequest, textStatus, errorThrown){}}); }}function notifications(productSuppId, type){$.ajax({url:'approve/notifications', data:{"type":type, 'productSuppId':productSuppId}, type:'post', success:function(result){if (result == productSuppId){$('.jq-growl-' + productSuppId).html('<button id="jq-growl-danger-noti-' + productSuppId + '" class="btn btn-danger btn-xs" onclick ="notifications( ' + productSuppId + ', 1)"> แจ้งปรับปรุงแล้ว </button>'); }$.growl.warning({message:"แจ้งเตือนให้ Suppliers ปรับปรุงเนื้อหา ", size:'small'}); }, error:function(XMLHttpRequest, textStatus, errorThrown){}}); }
